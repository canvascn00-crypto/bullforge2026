<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bullforge | The Future isn't Just Bullish. It's Bullforge.</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --gold-primary: #FFD700;
      --gold-secondary: #FFA500;
      --dark-bg: #050505;
      --dark-card: #0F0F0F;
      --dark-border: #1A1A1A;
      --text-white: #FFFFFF;
      --text-gray: #A0A0A0;
      --text-muted: #666666;
      --danger: #FF4444;
      --success: #00C853;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
    html { scroll-behavior: smooth; }
    body { background-color: var(--dark-bg); color: var(--text-white); line-height: 1.6; overflow-x: hidden; }
    .container { max-width: 1400px; margin: 0 auto; padding: 0 24px; }

    .page { display: none; }
    .page.is-active { display: block; }

    .navbar {
      position: fixed; top: 0; left: 0; width: 100%; z-index: 999;
      padding: 16px 0; background: rgba(5, 5, 5, 0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--dark-border);
    }
    .navbar-content { display: flex; justify-content: space-between; align-items: center; gap: 16px; }
    .navbar-logo {
      font-size: 28px; font-weight: 900; color: var(--gold-primary); letter-spacing: -0.5px;
      text-decoration: none; white-space: nowrap;
    }
    .navbar-logo:hover { opacity: 0.9; }

    .navbar-links { display: flex; gap: 22px; align-items: center; flex-wrap: wrap; justify-content: flex-end; }
    .navbar-links a {
      color: var(--text-gray); text-decoration: none; font-weight: 600;
      transition: color 0.3s ease; white-space: nowrap;
    }
    .navbar-links a:hover { color: var(--gold-primary); }

    .wallet-container {
      position: relative;
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    #walletConnectBtn {
      padding: 10px 24px;
      background: var(--gold-primary);
      color: var(--dark-bg);
      border: none;
      border-radius: 50px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    #walletConnectBtn:hover:not(:disabled) { box-shadow: 0 0 24px rgba(255, 215, 0, 0.4); transform: scale(1.03); }
    #walletConnectBtn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; background: #b89400; }

    #disconnectBtn {
      padding: 8px 16px;
      background: transparent;
      color: var(--gold-primary);
      border: 1px solid var(--gold-primary);
      border-radius: 50px;
      font-weight: 700;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    #disconnectBtn:hover { background: rgba(255, 215, 0, 0.1); }

    #networkBadge {
      display: none;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--dark-border);
      background: rgba(255, 215, 0, 0.08);
      color: var(--gold-primary);
      font-weight: 800;
      font-size: 12px;
      letter-spacing: 0.2px;
      white-space: nowrap;
    }
    #networkBadge.bad {
      border-color: var(--danger);
      color: var(--danger);
      background: rgba(255, 68, 68, 0.08);
    }

    .section { padding: 120px 0; position: relative; }
    .section-header { text-align: center; margin-bottom: 80px; }
    .section-subtitle { font-size: 14px; text-transform: uppercase; letter-spacing: 2px; color: var(--gold-primary); margin-bottom: 12px; font-weight: 700; }
    .section-title { font-size: 56px; font-weight: 900; line-height: 1.1; margin-bottom: 16px; }
    .section-desc { font-size: 18px; color: var(--text-gray); max-width: 700px; margin: 0 auto; }

    .home-landing {
      min-height: 100vh;
      padding-top: 120px;
      position: relative;
      overflow: hidden;
      background: linear-gradient(180deg, #0A0500 0%, var(--dark-bg) 100%);
    }
    .home-hero-glow {
      position: absolute; inset: 0;
      background: radial-gradient(circle at 50% 20%, rgba(255,215,0,.18), transparent 55%);
      pointer-events: none;
    }
    .hero-token-title {
      font-size: 96px;
      font-weight: 900;
      line-height: 1;
      letter-spacing: -2px;
      background: linear-gradient(180deg, var(--gold-primary) 0%, var(--gold-secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 14px;
    }

    .buy-button {
      width: 100%;
      padding: 18px;
      background: linear-gradient(90deg, var(--gold-secondary) 0%, var(--gold-primary) 100%);
      color: var(--dark-bg);
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 900;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .buy-button:hover:not(:disabled) { box-shadow: 0 0 32px rgba(255, 215, 0, 0.4); transform: translateY(-2px); }
    .buy-button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    .btn-secondary {
      width: 100%;
      padding: 14px;
      background: transparent;
      color: var(--gold-primary);
      border: 2px solid var(--gold-primary);
      border-radius: 12px;
      font-size: 16px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 12px;
    }
    .btn-secondary:hover:not(:disabled) { background: rgba(255, 215, 0, 0.1); }
    .btn-small { width: auto; padding: 10px 20px; font-size: 14px; margin: 5px; }

    .tokenomics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 24px; }
    .tokenomics-card { background: var(--dark-card); border: 1px solid var(--dark-border); border-radius: 16px; padding: 30px; transition: .3s ease; }
    .tokenomics-card:hover { border-color: var(--gold-primary); box-shadow: 0 10px 30px rgba(255,215,0,.12); transform: translateY(-6px); }
    .tokenomics-percent { font-size: 44px; font-weight: 900; color: var(--gold-primary); margin-bottom: 8px; }
    .tokenomics-label { font-size: 18px; font-weight: 700; margin-bottom: 12px; }
    .tokenomics-desc { font-size: 14px; color: var(--text-gray); }

    .roadmap-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 32px; }
    .roadmap-card { background: var(--dark-card); border: 1px solid var(--dark-border); border-radius: 16px; padding: 32px; transition: .3s ease; }
    .roadmap-card:hover { border-color: var(--gold-primary); box-shadow: 0 10px 30px rgba(255,215,0,.12); transform: translateY(-6px); }
    .roadmap-phase { font-size: 13px; text-transform: uppercase; letter-spacing: 1px; color: var(--gold-primary); font-weight: 700; margin-bottom: 12px; }
    .roadmap-title { font-size: 24px; font-weight: 800; margin-bottom: 20px; }
    .roadmap-list { list-style: none; }
    .roadmap-list li { padding: 8px 0; color: var(--text-gray); position: relative; padding-left: 24px; }
    .roadmap-list li::before { content: "‚ú¶"; position: absolute; left: 0; color: var(--gold-primary); }

    .hero { min-height: 100vh; padding-top: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background: linear-gradient(180deg, #0A0500 0%, var(--dark-bg) 100%); position: relative; overflow: hidden; }
    .hero-bg-glow { position: absolute; top: -50%; left: 50%; transform: translateX(-50%); width: 1200px; height: 1200px; background: radial-gradient(circle, rgba(255, 215, 0, 0.15) 0%, transparent 70%); z-index: 0; }
    .hero-content { position: relative; z-index: 1; max-width: 900px; width: 100%; }
    .hero-title { font-size: 72px; font-weight: 900; line-height: 1.1; margin-bottom: 16px; background: linear-gradient(180deg, var(--gold-primary) 0%, var(--gold-secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .hero-slogan { font-size: 24px; color: var(--text-gray); margin-bottom: 48px; font-weight: 400; }

    .presale-stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; width: 100%; }
    .stat-card { background: var(--dark-card); border: 1px solid var(--dark-border); border-radius: 12px; padding: 20px; text-align: left; }
    .stat-label { font-size: 13px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; }
    .stat-value { font-size: 24px; font-weight: 700; color: var(--gold-primary); }

    .countdown-wrapper { margin: 32px 0; }
    .countdown-title { font-size: 14px; color: var(--text-gray); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; }
    .countdown-grid { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
    .countdown-box { background: var(--dark-card); border: 1px solid var(--gold-primary); border-radius: 12px; min-width: 100px; padding: 16px 8px; }
    .countdown-number { font-size: 40px; font-weight: 900; color: var(--gold-primary); line-height: 1; }
    .countdown-text { font-size: 12px; color: var(--text-gray); margin-top: 8px; text-transform: uppercase; }

    .progress-wrapper { width: 100%; margin: 32px 0; }
    .progress-header { display: flex; justify-content: space-between; margin-bottom: 12px; }
    .progress-header span { font-size: 14px; color: var(--text-gray); }
    .progress-bar-container { width: 100%; height: 12px; background: var(--dark-card); border-radius: 100px; overflow: hidden; border: 1px solid var(--dark-border); }
    .progress-bar-fill { height: 100%; background: linear-gradient(90deg, var(--gold-secondary) 0%, var(--gold-primary) 100%); width: 0%; transition: width 0.8s ease; border-radius: 100px; }

    .buy-form-card { background: var(--dark-card); border: 1px solid var(--dark-border); border-radius: 16px; padding: 32px; max-width: 600px; margin: 0 auto; width: 100%; }
    .form-input-group { margin-bottom: 16px; }
    .form-label { display: flex; justify-content: space-between; gap: 10px; margin-bottom: 8px; font-size: 14px; color: var(--text-gray); flex-wrap: wrap; }
    .form-input, .form-select { width: 100%; padding: 16px; background: var(--dark-bg); border: 1px solid var(--dark-border); border-radius: 12px; color: var(--text-white); transition: border-color 0.3s ease; }
    .form-input { font-size: 18px; font-weight: 600; }
    .form-select { font-size: 16px; }
    .form-input:focus, .form-select:focus { outline: none; border-color: var(--gold-primary); }
    .token-estimate { text-align: left; font-size: 14px; color: var(--text-gray); margin: 12px 0 24px; }

    .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 32px; }
    .feature-card { background: var(--dark-card); border: 1px solid var(--dark-border); border-radius: 16px; padding: 40px; transition: all 0.3s ease; }
    .feature-card:hover { border-color: var(--gold-primary); transform: translateY(-8px); box-shadow: 0 16px 40px rgba(255, 215, 0, 0.1); }
    .feature-icon { font-size: 48px; margin-bottom: 24px; }
    .feature-title { font-size: 28px; font-weight: 800; margin-bottom: 16px; color: var(--gold-primary); }
    .feature-desc { font-size: 16px; color: var(--text-gray); line-height: 1.8; }

    .referral-box { background: var(--dark-bg); border: 1px solid var(--dark-border); border-radius: 16px; padding: 32px; margin-top: 32px; }
    .referral-link { display: flex; gap: 12px; margin-top: 16px; }
    .referral-link input { flex: 1; padding: 12px; background: var(--dark-bg); border: 1px solid var(--dark-border); border-radius: 8px; color: var(--text-white); font-family: monospace; }

    .partners-section { padding: 60px 0; background: var(--dark-card); }
    .partners-grid { display: flex; flex-wrap: wrap; gap: 32px; justify-content: center; align-items: center; }
    .partner-logo { font-size: 18px; font-weight: 700; color: var(--text-muted); transition: color 0.3s ease; }
    .partner-logo:hover { color: var(--gold-primary); }

    .footer { padding: 60px 0 30px; border-top: 1px solid var(--dark-border); }
    .footer-content { display: flex; flex-direction: column; align-items: center; text-align: center; }
    .footer-logo { font-size: 36px; font-weight: 900; color: var(--gold-primary); margin-bottom: 24px; }
    .footer-links { display: flex; gap: 32px; margin-bottom: 32px; flex-wrap: wrap; justify-content: center; }
    .footer-links a { color: var(--text-gray); text-decoration: none; font-weight: 500; transition: color 0.3s ease; }
    .footer-links a:hover { color: var(--gold-primary); }
    .footer-contract { font-family: monospace; font-size: 14px; color: var(--text-muted); margin-bottom: 24px; word-break: break-all; }
    .footer-copyright { font-size: 14px; color: var(--text-muted); }

    .notification { position: fixed; top: 100px; right: 24px; max-width: 400px; padding: 20px 24px; background: var(--dark-card); border: 1px solid var(--gold-primary); border-radius: 12px; z-index: 9999; box-shadow: 0 16px 40px rgba(0,0,0,0.5); transform: translateX(120%); transition: transform 0.3s ease; }
    .notification.show { transform: translateX(0); }
    .notification-title { font-weight: 700; margin-bottom: 8px; }
    .notification-desc { font-size: 14px; color: var(--text-gray); }
    .loading-spinner { display: inline-block; width: 20px; height: 20px; border: 2px solid var(--text-muted); border-radius: 50%; border-top-color: var(--gold-primary); animation: spin 1s linear infinite; vertical-align: middle; }
    @keyframes spin { to { transform: rotate(360deg); } }

    @media (max-width: 900px) {
      .navbar-links a:not([data-nav="home"]):not([data-nav="buy"]) { display: none; }
      .hero-title { font-size: 40px; }
      .hero-token-title { font-size: 56px; }
      .hero-slogan { font-size: 18px; }
      .presale-stats-grid { grid-template-columns: repeat(2, 1fr); }
      .countdown-grid { gap: 8px; }
      .countdown-box { min-width: 70px; }
      .countdown-number { font-size: 28px; }
      .section-title { font-size: 36px; }
      .feature-grid, .tokenomics-grid, .roadmap-grid { grid-template-columns: 1fr; }
      .referral-link { flex-direction: column; }
      .notification { right: 12px; left: 12px; max-width: none; }
      .wallet-container { gap: 6px; }
      #walletConnectBtn { padding: 9px 18px; }
      #disconnectBtn { padding: 7px 14px; }
    }
  </style>
</head>

<body>
  <div id="notification" class="notification">
    <div class="notification-title" id="notificationTitle"></div>
    <div class="notification-desc" id="notificationDesc"></div>
  </div>

  <nav class="navbar">
    <div class="container navbar-content">
      <a class="navbar-logo" href="#home" data-nav="home">üêÇ BULLFORGE</a>
      <div class="navbar-links">
        <a href="#home" data-nav="home">Home</a>
        <a href="#buy" data-nav="buy">Buy Now</a>
        <a href="#howtobuy" data-nav="howtobuy">How to Buy</a>
        <a href="#whitepaper" data-nav="whitepaper">Whitepaper</a>
        <a href="#staking" data-nav="staking">Staking</a>
        <a href="#referral" data-nav="referral">Referral</a>
        <div class="wallet-container">
          <span id="networkBadge">BNB</span>
          <button id="walletConnectBtn">Connect Wallet</button>
          <button id="disconnectBtn" style="display:none;">Disconnect</button>
        </div>
      </div>
    </div>
  </nav>

  <section class="section page is-active home-landing" id="home" data-page="home">
    <div class="home-hero-glow"></div>
    <div class="container">
      <div class="section-header" style="margin-top:80px;">
        <div class="section-subtitle">WELCOME TO BULLFORGE</div>
        <h1 class="hero-token-title">$BULL</h1>
        <p class="section-desc">The Future isn't Just Bullish. It's Bullforge.</p>
        <div style="margin-top:30px;">
          <button class="buy-button" style="max-width:260px;" onclick="location.hash='buy'">Buy Now</button>
        </div>
      </div>

      <div class="section-header" style="margin-bottom:30px;">
        <div class="section-subtitle">DNA Allocation</div>
        <h2 class="section-title" style="font-size:42px;">Token DNA</h2>
      </div>
      <div class="tokenomics-grid">
        <div class="tokenomics-card"><div class="tokenomics-percent">35%</div><div class="tokenomics-label">Presale</div><div class="tokenomics-desc">Public access distribution</div></div>
        <div class="tokenomics-card"><div class="tokenomics-percent">20%</div><div class="tokenomics-label">Staking Rewards</div><div class="tokenomics-desc">Sustainable yield incentives</div></div>
        <div class="tokenomics-card"><div class="tokenomics-percent">15%</div><div class="tokenomics-label">Liquidity</div><div class="tokenomics-desc">DEX stability and depth</div></div>
        <div class="tokenomics-card"><div class="tokenomics-percent">10%</div><div class="tokenomics-label">Marketing</div><div class="tokenomics-desc">Global growth campaigns</div></div>
        <div class="tokenomics-card"><div class="tokenomics-percent">10%</div><div class="tokenomics-label">Ecosystem</div><div class="tokenomics-desc">Partnerships & utilities</div></div>
        <div class="tokenomics-card"><div class="tokenomics-percent">10%</div><div class="tokenomics-label">Team</div><div class="tokenomics-desc">Long-term vested allocation</div></div>
      </div>

      <div class="section-header" style="margin-top:80px;">
        <div class="section-subtitle">Roadmap</div>
        <h2 class="section-title" style="font-size:42px;">Forge Evolution</h2>
      </div>
      <div class="roadmap-grid">
        <div class="roadmap-card">
          <div class="roadmap-phase">Phase 01</div>
          <div class="roadmap-title">Ignition</div>
          <ul class="roadmap-list">
            <li>Brand launch & community bootstrap</li>
            <li>Smart contract deployment</li>
            <li>Security review & test rounds</li>
          </ul>
        </div>
        <div class="roadmap-card">
          <div class="roadmap-phase">Phase 02</div>
          <div class="roadmap-title">Presale Forge</div>
          <ul class="roadmap-list">
            <li>Multi-stage presale goes live</li>
            <li>Referral engine enabled</li>
            <li>Cross-channel awareness campaign</li>
          </ul>
        </div>
        <div class="roadmap-card">
          <div class="roadmap-phase">Phase 03</div>
          <div class="roadmap-title">Expansion</div>
          <ul class="roadmap-list">
            <li>Claim portal opens</li>
            <li>DEX liquidity deployment</li>
            <li>Tracking listings rollout</li>
          </ul>
        </div>
        <div class="roadmap-card">
          <div class="roadmap-phase">Phase 04</div>
          <div class="roadmap-title">Dominance</div>
          <ul class="roadmap-list">
            <li>Staking launch</li>
            <li>Utility integrations</li>
            <li>CEX strategy + partnerships</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="hero page" data-page="buy" id="buy">
    <div class="hero-bg-glow"></div>
    <div class="container hero-content">
      <h1 class="hero-title">Buy $BULL</h1>
      <p class="hero-slogan">Forged in the chaos of the blockchain, built to thrive where others fall.</p>

      <div class="presale-stats-grid">
        <div class="stat-card"><div class="stat-label">Current Price</div><div class="stat-value" id="currentPrice"><span class="loading-spinner"></span></div></div>
        <div class="stat-card"><div class="stat-label">Total Raised</div><div class="stat-value" id="totalRaised"><span class="loading-spinner"></span></div></div>
        <div class="stat-card"><div class="stat-label">Current Stage</div><div class="stat-value" id="currentStage"><span class="loading-spinner"></span></div></div>
        <div class="stat-card"><div class="stat-label">1 BNB =</div><div class="stat-value" id="tokenRate"><span class="loading-spinner"></span></div></div>
      </div>

      <div class="countdown-wrapper">
        <div class="countdown-title">PRESALE ENDS IN</div>
        <div class="countdown-grid">
          <div class="countdown-box"><div class="countdown-number" id="countdownDays">--</div><div class="countdown-text">Days</div></div>
          <div class="countdown-box"><div class="countdown-number" id="countdownHours">--</div><div class="countdown-text">Hours</div></div>
          <div class="countdown-box"><div class="countdown-number" id="countdownMinutes">--</div><div class="countdown-text">Minutes</div></div>
          <div class="countdown-box"><div class="countdown-number" id="countdownSeconds">--</div><div class="countdown-text">Seconds</div></div>
        </div>
      </div>

      <div class="progress-wrapper">
        <div class="progress-header"><span>Presale Progress</span><span id="progressPercent">0%</span></div>
        <div class="progress-bar-container"><div class="progress-bar-fill" id="progressBarFill"></div></div>
      </div>

      <div class="buy-form-card">
        <div class="form-input-group">
          <div class="form-label"><span>Amount (BNB)</span><span>Balance: <span id="walletBalance">0.00</span> BNB</span></div>
          <input type="number" class="form-input" id="bnbAmount" placeholder="0.0" step="0.01" min="0">
        </div>
        <div class="form-input-group">
          <div class="form-label"><span>Slippage Tolerance (%)</span></div>
          <input type="number" class="form-input" id="slippage" placeholder="1.0" step="0.1" min="0.1" value="1.0">
        </div>
        <div class="form-input-group">
          <div class="form-label"><span>Referrer Address (Optional)</span></div>
          <input type="text" class="form-input" id="referrerAddress" placeholder="0x...">
        </div>
        <div class="token-estimate" id="tokenEstimate">Enter BNB amount to see estimated $BULL tokens</div>
        <button class="buy-button" id="buyButton" disabled>Connect Wallet To Buy</button>
        <button class="btn-secondary" id="claimButton" style="display:none;">Claim Your $BULL Tokens</button>
      </div>
    </div>
  </section>

  <section class="section page" id="howtobuy" data-page="howtobuy">
    <div class="container">
      <div class="section-header">
        <div class="section-subtitle">How to Buy</div>
        <h2 class="section-title">Buy $BULL in Minutes</h2>
      </div>
      <div class="feature-grid">
        <div class="feature-card"><div class="feature-icon">1Ô∏è‚É£</div><h3 class="feature-title">Get a Wallet</h3><p class="feature-desc">Use MetaMask / Trust Wallet and ensure BNB Smart Chain support.</p></div>
        <div class="feature-card"><div class="feature-icon">2Ô∏è‚É£</div><h3 class="feature-title">Fund with BNB</h3><p class="feature-desc">Send BNB to your wallet address (Chain ID 56).</p></div>
        <div class="feature-card"><div class="feature-icon">3Ô∏è‚É£</div><h3 class="feature-title">Connect & Buy</h3><p class="feature-desc">Go to Buy Now, connect wallet, enter BNB amount, confirm transaction.</p></div>
      </div>
    </div>
  </section>

  <section class="section page" id="whitepaper" data-page="whitepaper">
    <div class="container">
      <div class="section-header"><div class="section-subtitle">Whitepaper</div><h2 class="section-title">Bullforge Whitepaper</h2></div>
      <div class="buy-form-card" style="max-width: 900px;">
        <p style="color: var(--text-gray); margin-bottom: 16px;">Replace the button link with your official whitepaper URL.</p>
        <a href="#" target="_blank" rel="noreferrer"><button class="buy-button" style="max-width:320px;">Open Whitepaper</button></a>
      </div>
    </div>
  </section>

  <section class="section page" id="staking" data-page="staking">
    <div class="container">
      <div class="section-header"><div class="section-subtitle">Staking</div><h2 class="section-title">HODL Forge</h2></div>
      <div class="buy-form-card" style="max-width: 800px;">
        <h3 style="margin-bottom: 16px; color: var(--gold-primary);">70% APY (After Presale)</h3>
        <p style="color: var(--text-gray);">Staking UI can be enabled once staking contract is live.</p>
      </div>
    </div>
  </section>

  <section class="section page" id="referral" data-page="referral">
    <div class="container">
      <div class="section-header"><div class="section-subtitle">Referral</div><h2 class="section-title">Forge-To-Earn</h2></div>
      <div class="referral-box" style="display:block; max-width: 900px; margin: 0 auto;">
        <h3 style="margin-bottom: 16px; color: var(--gold-primary);">Your Referral Link</h3>
        <p style="color: var(--text-gray); margin-bottom: 16px;">Connect wallet to generate your personal referral link.</p>
        <div class="referral-link">
          <input type="text" id="referralLink2" readonly value="Connect wallet to generate..." />
          <button class="btn-small btn-secondary" id="copyReferralBtn2">Copy Link</button>
        </div>
      </div>
    </div>
  </section>

  <section class="partners-section">
    <div class="container">
      <div class="section-header"><div class="section-subtitle">Powered By</div></div>
      <div class="partners-grid">
        <div class="partner-logo">BNB Chain</div><div class="partner-logo">MetaMask</div><div class="partner-logo">Trust Wallet</div><div class="partner-logo">BscScan</div><div class="partner-logo">PancakeSwap</div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container footer-content">
      <div class="footer-logo">üêÇ BULLFORGE</div>
      <div class="footer-links">
        <a href="#home" data-nav="home">Home</a>
        <a href="#buy" data-nav="buy">Buy Now</a>
        <a href="#howtobuy" data-nav="howtobuy">How to Buy</a>
        <a href="#whitepaper" data-nav="whitepaper">Whitepaper</a>
        <a href="#staking" data-nav="staking">Staking</a>
        <a href="#referral" data-nav="referral">Referral</a>
      </div>
      <div class="footer-contract">Contract Address: 0x16D6c1a692AaC51a3821bA2903115d4600649F07</div>
      <div class="footer-copyright">¬© 2026 Bullforge. All rights reserved.</div>
    </div>
  </footer>
  <script type="module">
    import { ethers } from 'https://esm.sh/ethers@5.7.2';
    import { createWeb3Modal, defaultConfig } from 'https://esm.sh/@web3modal/ethers5@4.1.2';

    const CONFIG = {
      CONTRACT_ADDRESS: "0x16D6c1a692AaC51a3821bA2903115d4600649F07",
      WALLETCONNECT_PROJECT_ID: "fe819ed06d9e5489f764fc7b1dae1c4e",
      BSC_RPC: "https://bsc-dataseed.binance.org/",
      CHAIN_ID: 56,
      CHAIN_ID_HEX: "0x38",
      CHAIN_NAME: "BNB Smart Chain",
      CURRENCY: "BNB",
      EXPLORER: "https://bscscan.com"
    };

    const CONTRACT_ABI = [
      "function totalRaised() view returns (uint256)",
      "function currentStage() view returns (uint256)",
      "function stageEndTime() view returns (uint256)",
      "function getCurrentPrice() view returns (uint256)",
      "function getRate() view returns (uint256)",
      "function hardCap() view returns (uint256)",
      "function buyTokens(address _referrer, uint256 _minTokensOut) payable",
      "function claimTokens() external"
    ];

    // ---------- Elements ----------
    const notif = document.getElementById('notification');
    const notifTitle = document.getElementById('notificationTitle');
    const notifDesc = document.getElementById('notificationDesc');

    const connectBtn = document.getElementById('walletConnectBtn');
    const disconnectBtn = document.getElementById('disconnectBtn');
    const networkBadge = document.getElementById('networkBadge');

    const bnbAmountInput = document.getElementById('bnbAmount');
    const slippageInput = document.getElementById('slippage');
    const referrerInput = document.getElementById('referrerAddress');
    const tokenEstimate = document.getElementById('tokenEstimate');
    const walletBalanceSpan = document.getElementById('walletBalance');

    const currentPriceSpan = document.getElementById('currentPrice');
    const totalRaisedSpan = document.getElementById('totalRaised');
    const currentStageSpan = document.getElementById('currentStage');
    const tokenRateSpan = document.getElementById('tokenRate');

    const progressPercent = document.getElementById('progressPercent');
    const progressBarFill = document.getElementById('progressBarFill');

    const buyButton = document.getElementById('buyButton');
    const claimButton = document.getElementById('claimButton');

    const daysSpan = document.getElementById('countdownDays');
    const hoursSpan = document.getElementById('countdownHours');
    const minutesSpan = document.getElementById('countdownMinutes');
    const secondsSpan = document.getElementById('countdownSeconds');

    const referralLink2 = document.getElementById('referralLink2');
    const copyBtn2 = document.getElementById('copyReferralBtn2');

    // ---------- State ----------
    let provider = null;
    let signer = null;
    let contract = null;
    let userAddress = null;
    let web3Modal = null;
    let walletProvider = null;

    let currentRate = 0;
    let totalRaisedBNB = 0;
    let hardcapBNB = 2000;
    let stageEndTimestamp = 0;
    let isUIConnected = false;

    // ---------- Utils ----------
    function showNotification(title, desc, isError = false) {
      if (!notif) return;
      notifTitle.innerText = title;
      notifDesc.innerText = desc || '';
      notif.style.borderColor = isError ? 'var(--danger)' : 'var(--gold-primary)';
      notif.classList.add('show');
      setTimeout(() => notif.classList.remove('show'), 4200);
    }

    function safeShort(addr) {
      if (!addr || addr.length < 10) return addr || '';
      return `${addr.slice(0, 6)}...${addr.slice(-4)}`;
    }

    function setActivePage(pageName) {
      const target = pageName || 'home';
      document.querySelectorAll('.page').forEach(p => {
        p.classList.toggle('is-active', p.getAttribute('data-page') === target);
      });
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function getRouteFromHash() {
      const raw = (location.hash || '').replace('#', '').trim();
      return { page: raw || 'home' };
    }

    function isValidAddress(addr) {
      try { return ethers.utils.isAddress(addr); } catch { return false; }
    }

    function estimateTokens() {
      if (!tokenEstimate) return;
      const val = parseFloat(bnbAmountInput?.value || '');
      if (isNaN(val) || val <= 0 || !currentRate) {
        tokenEstimate.innerText = 'Enter BNB amount to see estimated $BULL tokens';
        return;
      }
      const est = val * currentRate;
      tokenEstimate.innerText = `You will receive approx. ${est.toFixed(2)} $BULL`;
    }

    function updateCountdown() {
      if (!daysSpan) return;
      if (!stageEndTimestamp || stageEndTimestamp <= 0) {
        daysSpan.innerText = '--';
        hoursSpan.innerText = '--';
        minutesSpan.innerText = '--';
        secondsSpan.innerText = '--';
        return;
      }

      const now = Math.floor(Date.now() / 1000);
      const diff = stageEndTimestamp - now;

      if (diff <= 0) {
        daysSpan.innerText = '00';
        hoursSpan.innerText = '00';
        minutesSpan.innerText = '00';
        secondsSpan.innerText = '00';
        return;
      }

      const d = Math.floor(diff / 86400);
      const h = Math.floor((diff % 86400) / 3600);
      const m = Math.floor((diff % 3600) / 60);
      const s = diff % 60;

      daysSpan.innerText = String(d).padStart(2, '0');
      hoursSpan.innerText = String(h).padStart(2, '0');
      minutesSpan.innerText = String(m).padStart(2, '0');
      secondsSpan.innerText = String(s).padStart(2, '0');
    }

    async function updateWalletUIAfterConnect() {
      if (!userAddress) return;
      connectBtn.innerText = safeShort(userAddress);
      connectBtn.disabled = true;
      disconnectBtn.style.display = 'inline-block';
      buyButton.disabled = false;
      buyButton.innerText = 'Buy $BULL';
      claimButton.style.display = 'block';
      isUIConnected = true;

      if (referralLink2) referralLink2.value = `${window.location.origin}?ref=${userAddress}`;

      try {
        const net = await provider.getNetwork();
        networkBadge.style.display = 'inline-block';
        if (net.chainId !== CONFIG.CHAIN_ID) {
          networkBadge.classList.add('bad');
          networkBadge.innerText = `Wrong Net (${net.chainId})`;
          showNotification("Wrong Network", "Please switch to BNB Smart Chain (56)", true);
        } else {
          networkBadge.classList.remove('bad');
          networkBadge.innerText = 'BNB (56)';
        }
      } catch {}
    }

    function resetWalletUI() {
      connectBtn.disabled = false;
      connectBtn.innerText = 'Connect Wallet';
      disconnectBtn.style.display = 'none';
      networkBadge.style.display = 'none';
      networkBadge.classList.remove('bad');
      buyButton.disabled = true;
      buyButton.innerText = 'Connect Wallet To Buy';
      claimButton.style.display = 'none';
      walletBalanceSpan.innerText = '0.00';
      if (referralLink2) referralLink2.value = 'Connect wallet to generate...';
      isUIConnected = false;
    }

    // ---------- Read chain ----------
    async function refreshContractData() {
      try {
        const readProvider = new ethers.providers.JsonRpcProvider(CONFIG.BSC_RPC);
        const readContract = new ethers.Contract(CONFIG.CONTRACT_ADDRESS, CONTRACT_ABI, readProvider);

        const raisedWei = await readContract.totalRaised().catch(() => null);
        totalRaisedBNB = raisedWei ? parseFloat(ethers.utils.formatEther(raisedWei)) : 0;
        if (totalRaisedSpan) totalRaisedSpan.innerText = `${totalRaisedBNB.toFixed(2)} BNB`;

        const stage = await readContract.currentStage().catch(() => 1);
        if (currentStageSpan) currentStageSpan.innerText = String(stage || 1);

        const rateRaw = await readContract.getRate().catch(() => null);
        currentRate = rateRaw ? parseFloat(ethers.utils.formatEther(rateRaw)) : 1000;
        if (tokenRateSpan) tokenRateSpan.innerText = `${currentRate.toFixed(0)} $BULL`;

        const priceRaw = await readContract.getCurrentPrice().catch(() => null);
        if (currentPriceSpan) {
          if (priceRaw) {
            currentPriceSpan.innerText = `${parseFloat(ethers.utils.formatEther(priceRaw)).toFixed(8)} BNB`;
          } else {
            currentPriceSpan.innerText = `${(1 / Math.max(currentRate, 1)).toFixed(8)} BNB`;
          }
        }

        const endTime = await readContract.stageEndTime().catch(() => null);
        stageEndTimestamp = endTime ? endTime.toNumber() : Math.floor(Date.now() / 1000) + 72 * 3600;
        updateCountdown();

        const hardCapRaw = await readContract.hardCap().catch(() => null);
        if (hardCapRaw) hardcapBNB = parseFloat(ethers.utils.formatEther(hardCapRaw));

        let p = (totalRaisedBNB / hardcapBNB) * 100;
        if (!isFinite(p) || p < 0) p = 0;
        if (p > 100) p = 100;
        if (progressPercent) progressPercent.innerText = `${p.toFixed(1)}%`;
        if (progressBarFill) progressBarFill.style.width = `${p}%`;

        if (isUIConnected && provider && userAddress) {
          const bal = await provider.getBalance(userAddress).catch(() => null);
          if (bal) walletBalanceSpan.innerText = parseFloat(ethers.utils.formatEther(bal)).toFixed(4);
        }

        estimateTokens();
      } catch (e) {
        console.warn('refreshContractData error:', e);
      }
    }

    // ---------- Web3Modal ----------
    function initWeb3Modal() {
      const chains = [{
        chainId: CONFIG.CHAIN_ID,
        name: CONFIG.CHAIN_NAME,
        currency: CONFIG.CURRENCY,
        explorerUrl: CONFIG.EXPLORER,
        rpcUrl: CONFIG.BSC_RPC
      }];

      const ethersConfig = defaultConfig({
        metadata: {
          name: 'Bullforge',
          description: 'Bullforge Presale',
          url: window.location.origin,
          icons: ['https://walletconnect.com/walletconnect-logo.png']
        },
        defaultChainId: CONFIG.CHAIN_ID,
        rpcUrl: CONFIG.BSC_RPC,
        projectId: CONFIG.WALLETCONNECT_PROJECT_ID
      });

      web3Modal = createWeb3Modal({
        ethersConfig,
        chains,
        projectId: CONFIG.WALLETCONNECT_PROJECT_ID,
        themeMode: 'dark',
        themeVariables: {
          '--w3m-accent': '#FFD700'
        }
      });
    }

    async function connectWallet() {
      try {
        connectBtn.disabled = true;
        connectBtn.innerText = 'Connecting...';

        await web3Modal.open();

        walletProvider = await web3Modal.getWalletProvider?.();
        if (!walletProvider) throw new Error('Wallet provider not found');

        provider = new ethers.providers.Web3Provider(walletProvider);
        signer = provider.getSigner();
        userAddress = await signer.getAddress();
        contract = new ethers.Contract(CONFIG.CONTRACT_ADDRESS, CONTRACT_ABI, signer);

        await updateWalletUIAfterConnect();
        await refreshContractData();
        showNotification('Connected', `Wallet ${safeShort(userAddress)} connected`);
      } catch (e) {
        resetWalletUI();
        showNotification('Connection Failed', e?.message || String(e), true);
      }
    }

    async function disconnectWallet() {
      try {
        if (web3Modal?.disconnect) await web3Modal.disconnect();
      } catch {}

      provider = null;
      signer = null;
      contract = null;
      walletProvider = null;
      userAddress = null;
      resetWalletUI();
      showNotification('Disconnected', 'Wallet disconnected');
    }

    // ---------- Actions ----------
    async function buyTokens() {
      if (!isUIConnected || !contract) {
        showNotification('Not Connected', 'Please connect wallet first', true);
        return;
      }

      const amount = parseFloat(bnbAmountInput.value || '');
      if (isNaN(amount) || amount <= 0) {
        showNotification('Invalid Amount', 'Please enter valid BNB amount', true);
        return;
      }

      const network = await provider.getNetwork();
      if (network.chainId !== CONFIG.CHAIN_ID) {
        showNotification('Wrong Network', 'Switch to BNB Smart Chain (56)', true);
        return;
      }

      let referrer = (referrerInput.value || '').trim();
      if (!referrer) referrer = ethers.constants.AddressZero;
      if (referrer !== ethers.constants.AddressZero && !isValidAddress(referrer)) {
        showNotification('Invalid Referrer', 'Referrer address format is invalid', true);
        return;
      }
      if (userAddress && referrer.toLowerCase() === userAddress.toLowerCase()) {
        referrer = ethers.constants.AddressZero;
      }

      const slippage = Math.max(parseFloat(slippageInput.value || '1') / 100, 0);
      const expected = amount * currentRate;
      const minOut = Math.floor(expected * (1 - slippage));

      try {
        buyButton.disabled = true;
        buyButton.innerText = 'Processing...';

        const tx = await contract.buyTokens(referrer, minOut, {
          value: ethers.utils.parseEther(amount.toString())
        });
        showNotification('Transaction Sent', tx.hash);

        await tx.wait();
        showNotification('Purchase Success', 'You bought $BULL successfully');
        bnbAmountInput.value = '';
        estimateTokens();
        await refreshContractData();
      } catch (e) {
        showNotification('Purchase Failed', e?.data?.message || e?.message || String(e), true);
      } finally {
        buyButton.disabled = false;
        buyButton.innerText = 'Buy $BULL';
      }
    }

    async function claimTokens() {
      if (!isUIConnected || !contract) {
        showNotification('Not Connected', 'Please connect wallet first', true);
        return;
      }

      try {
        claimButton.disabled = true;
        claimButton.innerText = 'Claiming...';

        const tx = await contract.claimTokens();
        showNotification('Claim Submitted', tx.hash);
        await tx.wait();
        showNotification('Claim Success', 'Your tokens have been claimed');
      } catch (e) {
        showNotification('Claim Failed', e?.data?.message || e?.message || String(e), true);
      } finally {
        claimButton.disabled = false;
        claimButton.innerText = 'Claim Your $BULL Tokens';
      }
    }

    // ---------- Navigation ----------
    function bindNavigation() {
      document.querySelectorAll('[data-nav]').forEach(el => {
        el.addEventListener('click', (e) => {
          const href = el.getAttribute('href') || '';
          if (href.startsWith('http')) return;
          e.preventDefault();
          const target = el.getAttribute('data-nav') || 'home';
          history.pushState(null, '', `#${target}`);
          setActivePage(target);
        });
      });

      window.addEventListener('hashchange', () => {
        const route = getRouteFromHash();
        setActivePage(route.page);
      });
    }

    // ---------- Bind events ----------
    connectBtn?.addEventListener('click', connectWallet);
    disconnectBtn?.addEventListener('click', disconnectWallet);
    bnbAmountInput?.addEventListener('input', estimateTokens);
    slippageInput?.addEventListener('input', estimateTokens);
    buyButton?.addEventListener('click', buyTokens);
    claimButton?.addEventListener('click', claimTokens);

    copyBtn2?.addEventListener('click', async () => {
      try {
        const txt = referralLink2?.value || '';
        if (!txt) return;
        await navigator.clipboard.writeText(txt);
        showNotification('Copied', 'Referral link copied');
      } catch {
        showNotification('Copy Failed', 'Please copy manually', true);
      }
    });

    // ---------- Init ----------
    initWeb3Modal();
    bindNavigation();

    const routeOnLoad = getRouteFromHash();
    setActivePage(routeOnLoad.page);

    refreshContractData();
    setInterval(refreshContractData, 15000);
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
